(this.webpackJsonpmobile_scheme=this.webpackJsonpmobile_scheme||[]).push([[0],{100:function(e,t,c){},109:function(e,t){},110:function(e,t){},152:function(e,t,c){"use strict";c.r(t);var a=c(1),n=c.n(a),s=c(27),l=c.n(s),r=(c(97),c(98),c(99),c.p,c(100),c(54)),o=c(13),i=c(158),d=c(154),u=c(161),j=c(29),h=c(2);var m=function(){return Object(h.jsx)(i.a,{bg:"dark",variant:"dark",children:Object(h.jsxs)(d.a,{className:"wrapper",children:[Object(h.jsxs)(i.a.Brand,{href:"/",children:[Object(h.jsx)("img",{alt:"",src:"/logo.png",width:"30",height:"30",className:"d-inline-block align-top logo"})," ","Prosper"]}),Object(h.jsx)("div",{className:"new-scheme-wrapper",children:Object(h.jsx)(u.a,{onClick:function(e){e.preventDefault(),window.location.href="/newscheme"},className:"new-scheme-button",children:Object(h.jsx)(j.a,{size:40})})})]})})},b=c(23),p=c.n(b),O=c(35),x=c(41),f=c(12),v=c(157),g=c(40),y=c.n(g),N=c(31),S=c.n(N),_=c(76),C=c(155),w=c(89),D=c(45),k=c(11),T=function(e){return Object(h.jsx)("div",{children:Object(h.jsxs)(k.g.Option,Object(_.a)(Object(_.a)({},e),{},{children:[Object(h.jsx)("input",{type:"checkbox",checked:e.isSelected,onChange:function(){return null}})," ",Object(h.jsx)("label",{children:e.label})]}))})};function B(e){var t,c;e.defaultPriceCondition&&(t=e.defaultPriceCondition.operator,c=e.defaultPriceCondition.price);var a=e.schemeNum;return Object(h.jsxs)(v.a.Group,{className:"mb-3",controlId:"formBasicOperator",children:[Object(h.jsx)(v.a.Label,{children:"Select the Condition"}),Object(h.jsxs)(C.a,{children:[Object(h.jsx)(w.a,{md:2,xs:4,children:Object(h.jsxs)(v.a.Control,{defaultValue:t,as:"select",name:"priceOperator_"+a,children:[Object(h.jsx)("option",{value:">=",children:">="}),Object(h.jsx)("option",{value:"=",children:"="}),Object(h.jsx)("option",{value:"<=",children:"<="})]})}),Object(h.jsx)(w.a,{children:Object(h.jsx)(v.a.Control,{type:"number",name:"condValue_"+a,defaultValue:c,placeholder:"Enter Condition Value"})})]})]})}function E(e){var t=e.schemeNum,c=e.setModelOptionSelected,a=e.modelOptionSelected;var n=[];e.options.map((function(e){return n.push({value:e,label:e})}));var s="modelOptionsSelected_"+t;return Object(h.jsx)(D.a,{closeMenuOnSelect:!1,options:n,isMulti:!0,isSearchable:!0,hideSelectedOptions:!1,components:{Option:T},onChange:function(e){!function(e){console.log(e),c(e)}(e)},allowSelectAll:!0,value:a,name:s})}function V(e){var t=e.schemeNum;return"No"===e.condType?Object(h.jsx)("div",{}):"Price_Condition"===e.condType?Object(h.jsx)(B,{schemeNum:t,defaultPriceCondition:e.defaultPriceCondition}):"Model_Condition"===e.condType?Object(h.jsx)(E,{options:e.modelList,modelOptionSelected:e.modelOptionSelected,setModelOptionSelected:e.setModelOptionSelected,schemeNum:t}):Object(h.jsx)("div",{})}var P=function(e){e.removeSchemeBox;var t=e.schemeNum,c=e.modelList,n=e.startDate,s=e.endDate,l="No",r=[],o=[];if(e.scheme){var i=e.schemeNum;if(l=(o={schemeName:e.scheme.name[i],startDate:e.scheme.start_date[i].split("T")[0],endDate:e.scheme.end_date[i].split("T")[0],cond:e.scheme.condition_type[i],price_condition:{operator:e.scheme.price_condition[i].operator,price:e.scheme.price_condition[i].price},creditType:e.scheme.creditValue[i].creditType,creditValue:e.scheme.creditValue[i].creditValue,modelOptionSelected:e.scheme.model_condition[i]}).cond,null!==o.modelOptionSelected)for(var d=0;d<o.modelOptionSelected.length;d++)r.push({value:o.modelOptionSelected[d],label:o.modelOptionSelected[d]})}0!==o.length&&(n=o.startDate,s=o.endDate);var u=Object(a.useState)(r),j=Object(f.a)(u,2),m=j[0],b=j[1],p=Object(a.useState)(l),O=Object(f.a)(p,2),x=O[0],g=O[1];return x?Object(h.jsxs)("div",{className:"scheme-box",children:[Object(h.jsx)(v.a.Group,{className:"mb-3",controlId:"formBasicName",children:Object(h.jsx)(v.a.Label,{controlId:"floatingInputGrid",label:"Email address",children:Object(h.jsx)(v.a.Control,{required:!0,type:"name",name:"schemeName_"+t,placeholder:"Enter Scheme Name",defaultValue:o.schemeName})})}),Object(h.jsxs)(v.a.Group,{className:"mb-3",controlId:"start_date",children:[Object(h.jsx)(v.a.Label,{children:"Start Date"}),Object(h.jsx)(v.a.Control,{required:!0,type:"date",name:"startDate_"+t,placeholder:"Scheme Start Date",defaultValue:n})]}),Object(h.jsxs)(v.a.Group,{className:"mb-3",controlId:"end_date",children:[Object(h.jsx)(v.a.Label,{children:"End Date"}),Object(h.jsx)(v.a.Control,{required:!0,type:"date",name:"endDate_"+t,placeholder:"Scheme End Date",defaultValue:s})]}),Object(h.jsxs)(v.a.Group,{className:"mb-3",controlId:"formBasicCondType",children:[Object(h.jsx)(v.a.Label,{children:"Select Condition Type"}),Object(h.jsxs)(v.a.Control,{required:!0,as:"select",name:"condType_"+t,value:x,onChange:function(e){g(e.target.value)},children:[Object(h.jsx)("option",{value:"No",children:"No Condition"}),Object(h.jsx)("option",{value:"Price_Condition",children:"Price Condition"}),Object(h.jsx)("option",{value:"Model_Condition",children:"Model Condition"})]})]}),Object(h.jsx)(V,{condType:x,defaultPriceCondition:o.price_condition,modelList:c,modelOptionSelected:m,setModelOptionSelected:b,schemeNum:t}),Object(h.jsxs)(v.a.Group,{className:"mb-3",controlId:"formBasicOperator",children:[Object(h.jsx)(v.a.Label,{children:"Offered Amount"}),Object(h.jsxs)(C.a,{children:[Object(h.jsx)(w.a,{md:2,xs:4,children:Object(h.jsxs)(v.a.Control,{required:!0,as:"select",name:"creditType_"+t,defaultValue:o.creditType,children:[Object(h.jsx)("option",{value:"%",children:"%"}),Object(h.jsx)("option",{value:"flat",children:"Flat"})]})}),Object(h.jsx)(w.a,{children:Object(h.jsx)(v.a.Control,{required:!0,type:"number",step:"0.01",defaultValue:o.creditValue,name:"creditValue_"+t,placeholder:"Enter Value"})})]})]})]}):Object(h.jsx)("div",{})},M=c(156),I=["xlsx","xlsb","xlsm","xls","xml","csv","txt","ods","fods","uos","sylk","dif","dbf","prn","qpw","123","wb*","wq*","html","htm"].map((function(e){return"."+e})).join(",");var L=function(e){var t,c=Object(a.useState)(),n=Object(f.a)(c,2),s=n[0],l=n[1],r=Object(a.useState)(),o=Object(f.a)(r,2),i=o[0],d=o[1],j=Object(a.useState)(),m=Object(f.a)(j,2),b=m[0],p=m[1],O=Object(a.useState)(),x=Object(f.a)(O,2),g=x[0],N=x[1],S=Object(a.useState)(),_=Object(f.a)(S,2),C=(_[0],_[1]);return Object(a.useEffect)((function(){N(null),d(!1)}),[]),Object(a.useEffect)((function(){if(s){var t="activation_file_upload"+e.fileNum;document.getElementById(t).click()}}),[s]),g&&(t=g.map((function(e){return Object(h.jsx)("option",{value:e,children:e},e)}))),Object(h.jsxs)("div",{children:[Object(h.jsx)(v.a,{onSubmit:function(e){e.preventDefault();var t=new FileReader,c=!!t.readAsBinaryString;try{t.onload=function(e){var t=e.target.result,a=y.a.read(t,{type:c?"binary":"array",bookVBA:!0}),n=a.SheetNames[0],s=a.Sheets[n],l=y.a.utils.sheet_to_json(s);p(l),N(Object.keys(l[0])),d(!0)},c?(console.log("rABS"),t.readAsBinaryString(s)):t.readAsArrayBuffer(s),document.getElementsByClassName("add-multi-scheme")[0].style.display="block",document.getElementsByClassName("add-multi-file")[0].style.display="block"}catch(a){alert("Please select Valid file")}},children:Object(h.jsxs)(v.a.Group,{controlId:"formFile",className:"mb-3",children:[Object(h.jsx)(v.a.Label,{children:"Upload Activation Sheet"}),Object(h.jsx)(v.a.Control,{type:"file",accept:I,onChange:function(e){var t=e.target.files;t&&t[0]&&(console.log(t[0]),l(t[0]))}}),Object(h.jsx)(u.a,{className:"activation_file_upload",id:"activation_file_upload"+e.fileNum,variant:"primary",type:"submit",children:"Upload"})]})}),Object(h.jsxs)(M.a,{show:i,children:[Object(h.jsx)(M.a.Header,{children:Object(h.jsx)(M.a.Title,{children:"Please Select the Correct Attributes"})}),Object(h.jsx)(M.a.Body,{children:Object(h.jsxs)(v.a,{onSubmit:function(t){var c;t.preventDefault();var a=t.target.dateCol.value,n=t.target.priceCol.value,s=t.target.modelCol.value;return console.log(b.length),c=b.map((function(e){return{DateCol:e[a],PriceCol:e[n],ModelCol:e[s]}})),e.excelJSON?e.setExcelJSON(e.excelJSON.concat(c)):e.setExcelJSON(c),e.setUserHeader({date:"DateCol",price:"PriceCol",model:"ModelCol"}),C(!0),d(!1),Object(h.jsx)("div",{})},children:[Object(h.jsxs)(v.a.Group,{className:"mb-3",controlId:"date_column",children:[Object(h.jsx)(v.a.Label,{children:"Date Column"}),Object(h.jsx)(v.a.Control,{as:"select",name:"dateCol",children:t})]}),Object(h.jsxs)(v.a.Group,{className:"mb-3",controlId:"model_column",children:[Object(h.jsx)(v.a.Label,{children:"Model Column"}),Object(h.jsx)(v.a.Control,{as:"select",name:"modelCol",children:t})]}),Object(h.jsxs)(v.a.Group,{className:"mb-3",controlId:"Price_column",children:[Object(h.jsx)(v.a.Label,{children:"Price Column"}),Object(h.jsx)(v.a.Control,{as:"select",name:"priceCol",children:t})]}),Object(h.jsx)(M.a.Footer,{children:Object(h.jsx)(u.a,{variant:"primary",type:"Submit",children:"Submit"})})]})})]})]})};function A(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Date,t=String(e.getMonth()+1),c=String(e.getDate()),a=String(e.getFullYear());return t.length<2&&(t="0"+t),c.length<2&&(c="0"+c),"".concat(a,"-").concat(t,"-").concat(c)}var F=function(){var e=Object(a.useState)({date:"",model:"",price:""}),t=Object(f.a)(e,2),c=t[0],n=t[1],s=Object(a.useState)(),l=Object(f.a)(s,2),r=l[0],i=l[1],d=Object(a.useState)([]),m=Object(f.a)(d,2),b=m[0],g=m[1],y=Object(a.useState)(),N=Object(f.a)(y,2),_=(N[0],N[1],Object(a.useState)([])),C=Object(f.a)(_,2),w=(C[0],C[1]),D=Object(a.useState)(),k=Object(f.a)(D,2),T=k[0],B=k[1],E=Object(a.useState)(),V=Object(f.a)(E,2),M=V[0],I=V[1],F=Object(a.useState)(0),G=Object(f.a)(F,2),J=G[0],U=G[1],q=Object(a.useState)(),z=Object(f.a)(q,2),H=z[0],R=z[1],Y=Object(a.useState)(),K=Object(f.a)(Y,2),Q=K[0],W=K[1],X=Object(a.useState)(0),Z=Object(f.a)(X,2),$=Z[0],ee=Z[1],te=Object(a.useState)([]),ce=Object(f.a)(te,2),ae=ce[0],ne=ce[1],se=Object(a.useState)(),le=Object(f.a)(se,2),re=le[0],oe=le[1],ie=Object(o.f)();function de(e){console.log(e),console.log(b);var t=Object(x.a)(b);console.log(t),t=t.filter((function(t){return t.schemeNum!==e})),console.log(t),g(t)}function ue(){console.log("Render Scheme Box is called"),R(b.map((function(e){return Object(h.jsxs)("div",{children:[Object(h.jsx)("div",{class:"remove-scheme-wrapper float-right",children:Object(h.jsx)(u.a,{type:"button",onClick:function(t){de(e.schemeNum)},className:"button-remove-scheme",children:Object(h.jsx)(j.b,{size:30})})}),e.schemeComponent]})}))),b.length>0?document.getElementsByClassName("scheme-submit-button")[0].style.display="block":document.getElementsByClassName("scheme-submit-button")[0].style.display="none"}function je(){return je=Object(O.a)(p.a.mark((function e(t){var a,n,s,l,r,o,i,d,u;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),console.log(u),0!==b.length){e.next=7;break}return alert("Please add a scheme first using + Button"),e.abrupt("return",Object(h.jsx)("div",{}));case 7:for(console.log(b),a=[],n=[],s=[],l=[],r=[],o=[],i=[],[],d=0;d<b.length;d++)console.log(d),u=b[d].schemeNum,a.push(t.target["schemeName_"+u].value),n.push(t.target["startDate_"+u].value),s.push(t.target["endDate_"+u].value),l.push(t.target["condType_"+u].value),"No"===t.target["condType_"+u].value?(r.push({operator:null,price:null}),o.push(null)):"Price_Condition"===t.target["condType_"+u].value?(r.push({operator:t.target["priceOperator_"+u].value,price:t.target["condValue_"+u].value}),o.push(null)):"Model_Condition"===t.target["condType_"+u].value&&(r.push({operator:null,price:null}),"modelOptionsSelected_"+d,o.push(Object.values(t.target["modelOptionsSelected_"+u]).map((function(e){return e.value})))),i.push({creditType:t.target["creditType_"+u].value,creditValue:t.target["creditValue_"+u].value});return e.prev=17,e.next=20,S.a.post("/scheme/",{name:a,start_date:n,end_date:s,condition_type:l,price_condition:r,model_condition:o,data_header:{date:c.date,price:c.price,model:c.model},excel_data:Q,creditValue:i}).then(alert("Scheme added succesfully")).then(ie.push("/"));case 20:e.next=26;break;case 22:e.prev=22,e.t0=e.catch(17),console.log(e.t0),alert(e.t0.message);case 26:case"end":return e.stop()}}),e,null,[[17,22]])}))),je.apply(this,arguments)}return Object(a.useEffect)((function(){var e=Object(x.a)(ae);e.push({uploadComponent:Object(h.jsx)(L,{fileNum:$,setExcelJSON:W,excelJSON:Q,setUserHeader:n},$)}),ee($+1),ne(e)}),[]),Object(a.useEffect)((function(){r&&0===b.length&&document.getElementById("add-multi-scheme-button").click()}),[r]),Object(a.useEffect)((function(){ue(),w(b)}),[b]),Object(a.useEffect)((function(){ae&&oe(ae.map((function(e){return e.uploadComponent})))}),[ae]),Object(a.useEffect)((function(){if(Q){var e=new Date("1900-01-01"),t=new Date("1900-01-01"),c=[];Q.map((function(e){return c.push(e.DateCol)}));var a=Math.min.apply(null,c),n=Math.max.apply(null,c);e.setDate(e.getDate()+a-2),t.setDate(t.getDate()+n-2),B(A(e)),I(A(t)),i(Object(x.a)(new Set(Q.map((function(e){return e.ModelCol})))))}}),[Q]),Object(h.jsx)("div",{className:"container",children:Object(h.jsx)("div",{className:"row",children:Object(h.jsxs)("div",{className:"col-md-4 offset-md-4",children:[Object(h.jsx)("p",{children:"Please select the Activation file first, then add the scheme details below"}),Object(h.jsx)(u.a,{type:"button",onClick:function(e){!function(e){e.preventDefault();var t=ae;t.push({uploadComponent:Object(h.jsx)(L,{fileNum:$,setExcelJSON:W,excelJSON:Q,setUserHeader:n},$)}),ee($+1),ne(t),oe(ae.map((function(e){return e.uploadComponent})))}(e)},className:"add-multi-file float-right",children:"Add Extra File"}),re,Object(h.jsxs)(v.a,{onSubmit:function(e){!function(e){je.apply(this,arguments)}(e)},children:[Object(h.jsx)("div",{className:"scheme-wrapper",children:H}),Object(h.jsx)(u.a,{type:"button",onClick:function(e){!function(e){if(e.preventDefault(),!r)return alert("Please upload the activation sheet first"),Object(h.jsx)("div",{});var t=Object(x.a)(b);console.log(t),t.push({schemeNum:J,schemeComponent:Object(h.jsx)(P,{modelList:r,startDate:T,endDate:M,schemeNum:J,removeSchemeBox:de},J)}),U(J+1),g(t),ue()}(e)},className:"add-multi-scheme float-left",id:"add-multi-scheme-button",children:"Add Scheme"}),Object(h.jsx)(u.a,{variant:"primary",type:"submit",className:"scheme-submit-button float-right",children:"Submit"})]})]})})})},G=c(159),J=c(92),U=c.n(J);var q=function(){return Object(h.jsx)("div",{style:{width:"100%",height:"100",display:"flex",justifyContent:"center",alignItems:"center"},children:Object(h.jsx)(U.a,{type:"ThreeDots",color:"#2BAD60",height:"100",width:"100"})})},z=c(160);function H(e){return Intl.DateTimeFormat("en-US",{year:"numeric",month:"short",day:"2-digit"}).format(new Date(Date.parse(e)))}function R(e){var t=parseInt(e),c=(t=t.toString()).substring(t.length-3),a=t.substring(0,t.length-3);return""!=a&&(c=","+c),a.replace(/\B(?=(\d{2})+(?!\d))/g,",")+c}var Y=R,K=function(e){var t=e.scheme,c=e.schemeNum,a=(t._id,t.model_condition[c]);if(console.log(a),a)var n=a.map((function(e){return Object(h.jsx)("li",{children:e})}));return Object(h.jsx)(z.a,{style:{width:"100%"},className:"mt-4",children:Object(h.jsxs)(z.a.Body,{children:[Object(h.jsxs)("div",{className:"row",children:[Object(h.jsx)("div",{className:"col-md-6",children:Object(h.jsx)(z.a.Title,{children:t.name[c]})}),Object(h.jsx)("div",{className:"col-md-6",children:Object(h.jsxs)(z.a.Text,{children:[H(t.start_date[c])," to ",H(t.end_date[c])]})})]}),Object(h.jsxs)(u.a,{className:"green-background",children:["Credit Note : \u20b9 ",R(t.creditNote[c])," "]}),Object(h.jsxs)("div",{children:[Object(h.jsxs)("p",{children:[Object(h.jsxs)("span",{children:["Offer Applied : ",t.creditValue[c].creditValue]}),Object(h.jsx)("span",{children:t.creditValue[c].creditType})]}),Object(h.jsx)("p",{children:Object(h.jsxs)("span",{children:["Condition Used : ",t.condition_type[c]]})}),Object(h.jsx)("p",{children:Object(h.jsxs)("span",{children:[t.price_condition[c].operator,"  ",t.price_condition[c].price]})}),Object(h.jsx)("p",{children:Object(h.jsx)("span",{children:n})}),Object(h.jsx)("p",{children:Object(h.jsxs)("span",{children:["Number of Mobiles : ",t.ctMobile[c]]})}),Object(h.jsx)("p",{children:Object(h.jsxs)("span",{children:["Amount of Sale : \u20b9 ",R(t.totalSale[c])]})})]})]})},t._id+c)},Q=c(63);var W=function(e){var t=e.setDeleteLoading,c=e.setDeleteShow,a=[],n=e.scheme,s=n.name.length,l=0,r="/updatescheme/"+n._id;function o(){return(o=Object(O.a)(p.a.mark((function a(n){return p.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return t(!0),a.prev=1,a.next=4,S.a.delete("/scheme/".concat(n)).then(t(!1)).then(c(!0));case 4:a.sent,e.updateSchemeData(e.schemeData.filter((function(e){return e._id!==n}))),a.next=12;break;case 8:a.prev=8,a.t0=a.catch(1),console.log(a.t0),alert(a.t0.message);case 12:case"end":return a.stop()}}),a,null,[[1,8]])})))).apply(this,arguments)}for(var i=0;i<s;i++)l+=n.creditNote[i],a.push(Object(h.jsx)(K,{scheme:n,schemeNum:i},i));return console.log(l),Object(h.jsx)("div",{className:"major-scheme",id:n._id,children:Object(h.jsxs)(z.a,{children:[Object(h.jsxs)(z.a.Header,{children:[n._id,Object(h.jsxs)("span",{class:"float-right",children:[Object(h.jsx)(u.a,{className:"button-edit",onClick:function(e){e.preventDefault(),window.location.href=r},children:Object(h.jsx)(j.c,{size:20})}),Object(h.jsx)(u.a,{className:"button-delete",onClick:function(){window.confirm("Are you sure you wish to delete this scheme?")&&function(e){o.apply(this,arguments)}(n._id)},children:Object(h.jsx)(j.b,{size:20})})]})]}),Object(h.jsxs)(z.a.Body,{children:[Object(h.jsxs)("p",{children:[Object(h.jsxs)(u.a,{className:"green-background",children:["Credit Note : \u20b9 ",Y(l)," "]}),Object(h.jsxs)(u.a,{className:"view-more",onClick:function(){return function(e){var t=document.getElementById(e),c=t.getElementsByClassName("more-details")[0],a=t.getElementsByClassName("down-icon")[0],n=t.getElementsByClassName("up-icon")[0];"none"===c.style.display||""===c.style.display?(c.style.display="block",a.style.display="none",n.style.display="block"):(c.style.display="none",a.style.display="block",n.style.display="none")}(n._id)},children:[Object(h.jsx)(Q.a,{size:20,className:"down-icon"}),Object(h.jsx)(Q.b,{size:20,className:"up-icon"})]})]}),Object(h.jsx)("div",{className:"more-details",children:a})]})]})})};var X=function(){var e,t=Object(a.useState)(!1),c=Object(f.a)(t,2),n=c[0],s=c[1],l=Object(a.useState)(!1),r=Object(f.a)(l,2),o=r[0],i=r[1],d=Object(a.useState)(),u=Object(f.a)(d,2),j=u[0],m=u[1],b=Object(a.useState)(!0),x=Object(f.a)(b,2),v=x[0],g=x[1];function y(){return(y=Object(O.a)(p.a.mark((function e(){var t,c;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,S.a.get("/scheme/");case 3:t=e.sent,g(!1),c=t.data.results,m(c),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0),alert("Cannot Fetch your schemes. ERROR : "+e.t0.message);case 13:case"end":return e.stop()}}),e,null,[[0,9]])})))).apply(this,arguments)}function N(){return Object(h.jsx)("div",{class:"fixed-bottom",children:Object(h.jsx)(C.a,{children:Object(h.jsx)(w.a,{xs:12,children:Object(h.jsx)(G.a,{onClose:function(){return i(!1)},show:o,delay:2e3,autohide:!0,children:Object(h.jsx)(G.a.Body,{children:"Scheme Deleted Succefully"})})})})})}if(Object(a.useEffect)((function(){!function(){y.apply(this,arguments)}()}),[]),j){var _=0;e=j.map((function(e){return _++,console.log(e),Object(h.jsx)(W,{scheme:e,setDeleteLoading:s,setDeleteShow:i,schemeData:j,updateSchemeData:m},_)}))}return Object(h.jsx)("div",{className:"container",children:v||n?Object(h.jsx)(q,{}):Object(h.jsxs)("div",{className:"row",children:[Object(h.jsx)("div",{className:"col-md-4 offset-md-4",children:e}),o?Object(h.jsx)(N,{}):""]})})};var Z=function(e){var t=e.match.params.id,c=Object(a.useState)(),n=Object(f.a)(c,2),s=n[0],l=n[1],r=Object(o.f)(),i=Object(a.useState)(),d=Object(f.a)(i,2),j=d[0],m=d[1],b=Object(a.useState)(!1),g=Object(f.a)(b,2),y=g[0],N=g[1],_=[];function C(){return C=Object(O.a)(p.a.mark((function e(t){var c,a,n,s;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,S.a.get("/scheme/".concat(t));case 3:return c=e.sent,e.next=6,S.a.get("/scheme/exceldata/".concat(t));case 6:a=e.sent,n=a.data.results.data_header.model,m(Object(x.a)(new Set(a.data.results.excel_data.map((function(e){return e[n]}))))),s=c.data.results,l(s),e.next=17;break;case 13:e.prev=13,e.t0=e.catch(0),console.log(e.t0),alert(e.t0.message);case 17:case"end":return e.stop()}}),e,null,[[0,13]])}))),C.apply(this,arguments)}function w(){return(w=Object(O.a)(p.a.mark((function e(c){var a,n,s,l,o,i,d,u;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(N(!0),c.preventDefault(),a=[],n=[],s=[],l=[],o=[],i=[],d=[],[],u=0;u<_.length;u++)console.log(u),a.push(c.target["schemeName_"+u].value),n.push(c.target["startDate_"+u].value),s.push(c.target["endDate_"+u].value),l.push(c.target["condType_"+u].value),"No"===c.target["condType_"+u].value?(o.push({operator:null,price:null}),i.push(null)):"Price_Condition"===c.target["condType_"+u].value?(o.push({operator:c.target["priceOperator_"+u].value,price:c.target["condValue_"+u].value}),i.push(null)):"Model_Condition"===c.target["condType_"+u].value&&(o.push({operator:null,price:null}),i.push(Object.values(c.target["modelOptionsSelected_"+u]).map((function(e){return e.value})))),d.push({creditType:c.target["creditType_"+u].value,creditValue:c.target["creditValue_"+u].value});return console.log(i),e.prev=12,e.next=15,S.a.put("/scheme/".concat(t),{name:a,start_date:n,end_date:s,condition_type:l,price_condition:o,model_condition:i,creditValue:d});case 15:alert("Scheme added succesfully"),r.push("/"),e.next=23;break;case 19:e.prev=19,e.t0=e.catch(12),console.log(e.t0),alert(e.t0.message);case 23:case"end":return e.stop()}}),e,null,[[12,19]])})))).apply(this,arguments)}if(Object(a.useEffect)((function(){!function(e){C.apply(this,arguments)}(t)}),[]),s&&j){for(var D=0;D<s.creditNote.length;D++)_.push(Object(h.jsx)(P,{scheme:s,schemeNum:D,modelList:j},D));return Object(h.jsx)("div",{className:"container",children:Object(h.jsx)("div",{className:"row",children:Object(h.jsx)("div",{className:"col-md-4 offset-md-4",children:Object(h.jsxs)(v.a,{onSubmit:function(e){!function(e){w.apply(this,arguments)}(e)},children:[Object(h.jsx)("div",{className:"scheme-wrapper",children:_}),Object(h.jsx)(u.a,{variant:"primary",type:"submit",disabled:y,className:"scheme-update-button",children:y?"Updating":"Update"})]})})})})}return Object(h.jsx)("div",{children:Object(h.jsx)(q,{})})};var $=function(){return Object(h.jsxs)("div",{className:"App",children:[Object(h.jsx)(m,{}),Object(h.jsx)(r.a,{children:Object(h.jsxs)(o.c,{children:[Object(h.jsx)(o.a,{path:"/newscheme",children:Object(h.jsx)(F,{})}),Object(h.jsx)(o.a,{path:"/scheme",children:Object(h.jsx)(X,{})}),Object(h.jsx)(o.a,{path:"/updatescheme/:id",component:Z}),Object(h.jsx)(o.a,{path:"/",children:Object(h.jsx)(X,{})})]})})]})},ee=function(e){e&&e instanceof Function&&c.e(3).then(c.bind(null,162)).then((function(t){var c=t.getCLS,a=t.getFID,n=t.getFCP,s=t.getLCP,l=t.getTTFB;c(e),a(e),n(e),s(e),l(e)}))};l.a.render(Object(h.jsx)(n.a.StrictMode,{children:Object(h.jsx)($,{})}),document.getElementById("root")),ee()},78:function(e,t){},98:function(e,t,c){},99:function(e,t,c){}},[[152,1,2]]]);
//# sourceMappingURL=main.48f11ff0.chunk.js.map